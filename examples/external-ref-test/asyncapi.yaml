asyncapi: 3.0.0
info:
  title: External Ref Test API
  version: 1.0.0
  description: Test API to verify external file refs work correctly

servers:
  production:
    host: api.example.com
    protocol: ws

channels:
  device:
    address: device
    messages:
      ConfigureDeviceRequest:
        $ref: '#/components/messages/ConfigureDeviceRequest'

operations:
  sendConfigureDevice:
    action: send
    channel:
      $ref: '#/channels/device'
    messages:
      - $ref: '#/channels/device/messages/ConfigureDeviceRequest'

components:
  messages:
    ConfigureDeviceRequest:
      name: ConfigureDeviceRequest
      payload:
        $ref: 'schemas/device.yaml#/ConfigureDevicePayload'
